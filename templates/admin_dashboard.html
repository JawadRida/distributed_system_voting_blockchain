ADMIN_DASHBOARD_HTML = """{% extends "base.html" %}

{% block content %}
<div class="container mt-4">
    <div class="d-flex justify-content-between align-items-center mb-4">
        <h2><i class="fas fa-tachometer-alt text-danger"></i> Admin Dashboard</h2>
        <a href="{{ url_for('admin_logout') }}" class="btn btn-outline-danger">
            <i class="fas fa-sign-out-alt"></i> Logout
        </a>
    </div>

    <!-- Status Cards -->
    <div class="row mb-4">
        <div class="col-md-3">
            <div class="card text-center p-3" style="border-left: 4px solid #28a745;">
                <h3 class="text-success">{{ total_votes }}</h3>
                <p class="mb-0 text-muted">Total Votes</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3" style="border-left: 4px solid #007bff;">
                <h3 class="text-primary">{{ candidates|length }}</h3>
                <p class="mb-0 text-muted">Candidates</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3" style="border-left: 4px solid {% if is_active %}#28a745{% else %}#dc3545{% endif %};">
                <h3 class="{% if is_active %}text-success{% else %}text-danger{% endif %}">
                    {% if is_active %}Active{% else %}Closed{% endif %}
                </h3>
                <p class="mb-0 text-muted">Election Status</p>
            </div>
        </div>
        <div class="col-md-3">
            <div class="card text-center p-3" style="border-left: 4px solid #ffc107;">
                <h3 class="text-warning">
                    {{ ((election_settings.end_time - election_settings.start_time.now()).total_seconds() / 3600) | round(1) }}h
                </h3>
                <p class="mb-0 text-muted">Time Remaining</p>
            </div>
        </div>
    </div>

    <!-- Quick Actions -->
    <div class="row mb-4">
        <div class="col-md-12">
            <div class="card p-4">
                <h4 class="mb-3">Quick Actions</h4>
                <div class="btn-group" role="group">
                    <a href="{{ url_for('admin_candidates') }}" class="btn btn-primary">
                        <i class="fas fa-users"></i> Manage Candidates
                    </a>
                    <a href="{{ url_for('admin_election_settings') }}" class="btn btn-info">
                        <i class="fas fa-cog"></i> Election Settings
                    </a>
                    <a href="{{ url_for('results') }}" class="btn btn-success">
                        <i class="fas fa-chart-bar"></i> View Results
                    </a>
                    {% if is_active %}
                    <form method="POST" action="{{ url_for('admin_end_election') }}" style="display: inline;">
                        <button type="submit" class="btn btn-danger" 
                                onclick="return confirm('Are you sure you want to end the election?')">
                            <i class="fas fa-stop"></i> End Election
                        </button>
                    </form>
                    {% else %}
                    <form method="POST" action="{{ url_for('admin_start_election') }}" style="display: inline;">
                        <button type="submit" class="btn btn-success">
                            <i class="fas fa-play"></i> Start Election
                        </button>
                    </form>
                    {% endif %}
                </div>
            </div>
        </div>
    </div>

    <!-- Election Info -->
    <div class="row">
        <div class="col-md-6">
            <div class="card p-4">
                <h4 class="mb-3">Election Information</h4>
                <table class="table table-borderless">
                    <tr>
                        <td><strong>Title:</strong></td>
                        <td>{{ election_settings.title }}</td>
                    </tr>
                    <tr>
                        <td><strong>Start:</strong></td>
                        <td>{{ election_settings.start_time.strftime('%Y-%m-%d %H:%M') }}</td>
                    </tr>
                    <tr>
                        <td><strong>End:</strong></td>
                        <td>{{ election_settings.end_time.strftime('%Y-%m-%d %H:%M') }}</td>
                    </tr>
                    <tr>
                        <td><strong>Status:</strong></td>
                        <td>
                            <span class="badge bg-{% if is_active %}success{% else %}danger{% endif %}">
                                {% if is_active %}Active{% else %}Closed{% endif %}
                            </span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
        <div class="col-md-6">
            <div class="card p-4">
                <h4 class="mb-3">Current Results</h4>
                {% for candidate, votes in vote_data.results.items() %}
                <div class="mb-2">
                    <div class="d-flex justify-content-between">
                        <span>{{ candidate }}</span>
                        <strong>{{ votes }}</strong>
                    </div>
                    <div class="progress" style="height: 20px;">
                        <div class="progress-bar" style="width: {{ (votes / total_votes * 100) if total_votes > 0 else 0 }}%">
                            {{ ((votes / total_votes * 100) if total_votes > 0 else 0) | round(1) }}%
                        </div>
                    </div>
                </div>
                {% endfor %}
            </div>
        </div>
    </div>
</div>
{% endblock %}"""